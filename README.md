# Code

The original code refer to https://github.com/dongmingli-Ben/MidiNet-by-pytorch-Debugged

# Data

Data https://drive.google.com/drive/folders/1kQ9nXolLTOw1MNC8nPNguIXsvAFcwYCw

# Environment

```
anyio                     2.2.0            py39haa95532_2
argon2-cffi               20.1.0           py39h2bbff1b_1
async_generator           1.10               pyhd3eb1b0_0
attrs                     21.2.0             pyhd3eb1b0_0
babel                     2.9.1              pyhd3eb1b0_0
backcall                  0.2.0              pyhd3eb1b0_0
blas                      1.0                         mkl
bleach                    4.0.0              pyhd3eb1b0_0
brotlipy                  0.7.0           py39h2bbff1b_1003
ca-certificates           2021.7.5             haa95532_1
certifi                   2021.5.30        py39haa95532_0
cffi                      1.14.6           py39h2bbff1b_0
chardet                   4.0.0           py39haa95532_1003
colorama                  0.4.4              pyhd3eb1b0_0
cryptography              3.4.7            py39h71e12ea_0
cudatoolkit               10.2.89              h74a9793_1
cycler                    0.10.0                   pypi_0    pypi
decorator                 5.0.9              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
entrypoints               0.3              py39haa95532_0
freetype                  2.10.4               hd328e21_0
idna                      2.10               pyhd3eb1b0_0
importlib-metadata        3.10.0           py39haa95532_0
importlib_metadata        3.10.0               hd3eb1b0_0
intel-openmp              2021.3.0          haa95532_3372
ipdb                      0.13.9                   pypi_0    pypi
ipykernel                 5.3.4            py39h7b7c402_0
ipython                   7.26.0           py39hd4e2768_0
ipython_genutils          0.2.0              pyhd3eb1b0_1
jedi                      0.18.0           py39haa95532_1
jinja2                    3.0.1              pyhd3eb1b0_0
jpeg                      9b                   hb83a4c4_2
json5                     0.9.6              pyhd3eb1b0_0
jsonschema                3.2.0                      py_2
jupyter_client            6.1.12             pyhd3eb1b0_0
jupyter_core              4.7.1            py39haa95532_0
jupyter_server            1.4.1            py39haa95532_0
jupyterlab                3.1.7              pyhd3eb1b0_0
jupyterlab_pygments       0.1.2                      py_0
jupyterlab_server         2.7.1              pyhd3eb1b0_0
kiwisolver                1.3.1                    pypi_0    pypi
libpng                    1.6.37               h2a8f88b_0
libtiff                   4.2.0                hd0e1b90_0
libuv                     1.40.0               he774522_0
lz4-c                     1.9.3                h2bbff1b_1
m2w64-gcc-libgfortran     5.3.0                         6
m2w64-gcc-libs            5.3.0                         7
m2w64-gcc-libs-core       5.3.0                         7
m2w64-gmp                 6.1.0                         2
m2w64-libwinpthread-git   5.0.0.4634.697f757               2
markupsafe                2.0.1            py39h2bbff1b_0
matplotlib                3.4.3                    pypi_0    pypi
matplotlib-inline         0.1.2              pyhd3eb1b0_2
mido                      1.2.10                   pypi_0    pypi
mistune                   0.8.4           py39h2bbff1b_1000
mkl                       2021.3.0           haa95532_524
msys2-conda-epoch         20160418                      1
nbclassic                 0.2.6              pyhd3eb1b0_0
nbclient                  0.5.3              pyhd3eb1b0_0
nbconvert                 6.1.0            py39haa95532_0
nbformat                  5.1.3              pyhd3eb1b0_0
nest-asyncio              1.5.1              pyhd3eb1b0_0
ninja                     1.10.2               h6d14046_1
notebook                  6.4.3            py39haa95532_0
numpy                     1.21.2                   pypi_0    pypi
olefile                   0.46                       py_0
openssl                   1.1.1k               h2bbff1b_0
packaging                 21.0               pyhd3eb1b0_0
pandocfilters             1.4.3            py39haa95532_1
parso                     0.8.2              pyhd3eb1b0_0
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    8.3.1            py39h4fa10fc_0
pip                       21.2.4           py38haa95532_0
pretty-midi               0.2.9                    pypi_0    pypi
prometheus_client         0.11.0             pyhd3eb1b0_0
prompt-toolkit            3.0.19                   pypi_0    pypi
pycparser                 2.20                       py_2
pygments                  2.10.0                   pypi_0    pypi
pyopenssl                 20.0.1             pyhd3eb1b0_1
pyparsing                 2.4.7              pyhd3eb1b0_0
pypianoroll               1.0.4                    pypi_0    pypi
pyrsistent                0.18.0           py39h2bbff1b_0
pysocks                   1.7.1            py39haa95532_0
python                    3.9.6                h6244533_0
python-dateutil           2.8.2              pyhd3eb1b0_0
pytorch                   1.9.0           py3.9_cuda10.2_cudnn7_0    pytorch
pytz                      2021.1             pyhd3eb1b0_0
pywin32                   228              py39hbaba5e8_1
pywinpty                  0.5.7            py39haa95532_0
pyzmq                     22.2.1           py39hd77b12b_1
requests                  2.25.1             pyhd3eb1b0_0
scipy                     1.7.1                    pypi_0    pypi
send2trash                1.5.0              pyhd3eb1b0_1
setuptools                52.0.0           py39haa95532_0
six                       1.16.0             pyhd3eb1b0_0
sniffio                   1.2.0            py39haa95532_1
sqlite                    3.36.0               h2bbff1b_0
terminado                 0.9.4            py39haa95532_0
testpath                  0.5.0              pyhd3eb1b0_0
tk                        8.6.10               he774522_0
toml                      0.10.2                   pypi_0    pypi
torchvision               0.10.0               py39_cu102    pytorch
tornado                   6.1              py39h2bbff1b_0
traitlets                 5.0.5              pyhd3eb1b0_0
typing_extensions         3.10.0.0           pyh06a4308_0
tzdata                    2021a                h5d7bf9c_0
urllib3                   1.26.6             pyhd3eb1b0_1
vc                        14.2                 h21ff451_1
vs2015_runtime            14.27.29016          h5e58377_2
wcwidth                   0.2.5                      py_0
webencodings              0.5.1            py39haa95532_1
wheel                     0.37.0             pyhd3eb1b0_0
win_inet_pton             1.1.0            py39haa95532_0
wincertstore              0.2              py39h2bbff1b_0
winpty                    0.4.3                         4
xmldataset                1.0.4                    pypi_0    pypi
xz                        5.2.5                h62dcd97_0
zipp                      3.5.0              pyhd3eb1b0_0
zlib                      1.2.11               h62dcd97_4
zstd                      1.4.9                h19a0ad4_0
```



# Folder needed

* file
* models
* result
* samples
* data



# Run


After you have the data (placed in ```data``` folder), 
1. Make sure you have toolkits in the requirement.txt
2. Run main.py ,  
    is_train = 1 for training,  
    is_draw = 1 for drawing loss,  
    is_sample = 1 for generating music after finishing training.
  
3. If you would like to turn the output into real midi for listening  
    Run demo.py



# File

|file                  |  purposes|
|-|-|
|requirement.txt                  |  toolkits used in the whole work|
|main.py                         |  training setting, drawing setting, generation setting.|
|ops.py                          |  some functions used in model|
|model.py                        |  Generator and Discriminator.   (Based on model 3 in the MidiNet paper)|
|demo.py                         |  transform matrix into midi. (input : melody and chord matrix, output : midi)|
